/**
 *  合作者入驻依赖文件
 */
var commonJs = {
  jsonps: function (e, t, n) {
    $.ajax({type: "GET", data: t, dataType: "jsonp", url: e, async: false, success: n})
  },
// 邮箱检测
  isEmails: function (e) {
//var reg = /^([a-zA-Z0-9_-]+[\.]?)+@([a-zA-Z0-9])+((\.[a-zA-Z]{2,3}){1,2})$/;
    var t = /^([a-zA-Z0-9]+[_|\_|\.|-]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;
    if (t.test(e)) {
      return true
    }
    return false
  },
// 手机号检测  加入公司的测试账号 200开头
  verifyMobile: function (e) {
    var t = /^(((13[0-9]{1})|(15[0-9]{1})|(20[0-9]{1})|(18[0-9]{1})|(17[0-9]{1}))+\d{8})$/;
    if (!t.test(e)) {
      return false
    }
    return true
  },
// 只能是汉字跟英文
  checkNames: function (e) {
    var t = /[^\u4E00-\u9FA5a-zA-Z$]/;
//alert(rex.test(name));
    if (t.test(e)) {
      return false
    }
    return true
  },
//
  plusXing: function (e, t, n) {
    if (!(typeof e == "string" && e.constructor == String)) {
      e = e + "".replace(/^\s+|\s+$/g, "")
    }
    return e.substring(0, 3) + "****" + e.substring(8, 11)
  }, isqq: function (e) {
    var t = RegExp(/^[1-9][0-9]{4,9}$/).test(e);
    if (t) {
      return true
    } else return false
  }, isDate: function (e) {
    var t = /^(([0-9]{3}[1-9]|[0-9]{2}[1-9][0-9]{1}|[0-9]{1}[1-9][0-9]{2}|[1-9][0-9]{3})-(((0[13578]|1[02])-(0[1-9]|[12][0-9]|3[01]))|((0[469]|11)-(0[1-9]|[12][0-9]|30))|(02-(0[1-9]|[1][0-9]|2[0-8]))))|((([0-9]{2})(0[48]|[2468][048]|[13579][26])|((0[48]|[2468][048]|[3579][26])00))-02-29)$/;
    if (t.test(e)) {
      var n = e.substr(0, 4);
      var r = new Date;
      if (n > 1900 && n < r.getFullYear() + 1)return true
    }
    return false
  }, isNull: function (e) {
    if (e == "" || undefined == e) {
      return true
    }
    var t = "^[ ]+$";
    var n = new RegExp(t);
    return n.test(e)
  }, familyAddress: function (e) {
    var t = /^(?=.*?[\u4E00-\u9FA5])[\dA-Za-z\u4E00-\u9FA5]+(?=.*?[\u4E00-\u9FA5])/gi;
    if (t.test(e)) {
      return true
    }
    return false
  }, chooseType: function (e, t, n) {
    var r = "";
    for (var a = 0; a < e.length; a++) {
      if (e[a].replace(/^\s+|\s+$/g, "") != "") {
        r += e[a] + "*" + t + "*" + n + ","
      }
    }
    r = r.substring(0, r.length - 1);// 删除最后一个逗号
    return r
  }, setCookie: function (e, t, n) {
    var r = new Date;
    r.setDate(r.getDate() + n);
    document.cookie = e + "=" + encodeURI(t) + ";expires=" + r.toUTCString()
  }, getCookie: function (e) {
    var t = document.cookie.split("; ");
    for (var n = 0; n < t.length; n++) {
      var r = t[n].split("=");
      if (r[0] == e) {
        return decodeURI(r[1])
      }
    }
  }, removeCookie: function () {
    setCookie(name, "", -1)
  }, getSearchString: function (e) {
// 获取URL中?之后的字符
// http://www.sohu.com?name=xiaoli&sex=man.getSearchString("name")=xiaoli。
    var t = location.search;
    t = t.substring(1, t.length);
// 以&分隔字符串，获得类似name=xiaoli这样的元素数组
    var n = t.split("&");
    var r = new Object;
// 将每一个数组元素以=分隔并赋给obj对象  !***!
    for (var a = 0; a < n.length; a++) {
      var i = n[a].split("=");
      r[decodeURIComponent(i[0])] = decodeURIComponent(i[1])
    }
    return r[e]
  }, returnSexAndbackgroud: function (e) {
    var t = [];
    if (arguments[1] == "setting" && arguments[2]) {
// 如果还存在两个个参数的话，就是设置这个值
      var n = arguments[1];
      var r = arguments[2];
      e.find("span").each(function (e, t) {
        if ($(this).text() == r) {
          $(this).parent().find("i").removeClass("on");
          $(this).prev("i").addClass("on")
        }
      })
    }
    e.find("i").each(function (e, n) {
      if ($(this).hasClass("on")) {
        if (t.length != -1) {
          t.length = 0
        }
        t.push($(this).next("span").text())
      }
    });
    return t
  }, createTimeFormate: function (e) {
    return e.substring(0, 4) + "-" + e.substring(4, 6) + "-" + e.substring(6, 8) + " " + e.substring(8, 10) + ":" + e.substring(10, 12) + ":" + e.substring(12, e.length)
  }, CloseWebPage: function () {
// 关闭当前页面
    if (navigator.userAgent.indexOf("MSIE") > 0) {
      if (navigator.userAgent.indexOf("MSIE 6.0") > 0) {
        window.opener = null;
        window.close()
      } else {
        window.open("", "_top");
        window.top.close()
      }
    } else if (navigator.userAgent.indexOf("Firefox") > 0) {
      window.location.href = "about:blank "
    } else {
      window.opener = null;
      window.open("", "_self", "");
      window.close()
    }
  }, stopPropagation: function (e) {// 组织冒泡
//取消事件冒泡
    var t = arguments.callee.caller.arguments[0] || e;//若省略此句，下面的e改为event，IE运行可以，但是其他浏览器就不兼容
    if (t && t.stopPropagation) {
// this code is for Mozilla and Opera
      t.stopPropagation()
    } else if (window.event) {
// this code is for IE
      window.event.cancelBubble = true
    }
  }, preventDefault: function (e) {// 阻止默认行为
//如果提供了事件对象，则这是一个非IE浏览器
    if (e && e.preventDefault)
//阻止默认浏览器动作(W3C)
      e.preventDefault(); else
//IE中阻止函数器默认动作的方式
      window.event.returnValue = false;
    return false
  }
};
// 包装对象扩展 删除多余空格以及其他
// 包装对象扩展
String.prototype.ArrayDelete = function () {
  var e = this.split(",");
  for (var t = 0; t < e.length; t++) {
    var n = parseInt(e[t].replace(/^\s+|\s+$/g, ""));
    if (isNaN(n)) {
      e.splice(t, 1)
    }
  }
  return e
};
String.prototype.ArrayContr = function () {
  var e = this.split(",");
  var t = [];
  for (var n = 0; n < e.length; n++) {
    t.push(e[n].replace(/^\s+|\s+$/g, ""))
  }
  return t
};
Array.prototype.deleteSpace = function () {
// 实现删除数组中为空的一项
  var e;
  for (e = 0; e < this.length; e++) {
    if (this[e].replace(/^\s+|\s+$/g, "") == "") {
      this.splice(e, 1)
    }
  }
  return this
};
Array.prototype.indexOf = function (e) {
  for (var t = 0; t < this.length; t++) {
    if (this[t] == e)return t
  }
  return -1
};
Array.prototype.remove = function (e) {
  var t = this.indexOf(e);
  if (t > -1) {
    this.splice(t, 1)
  }
};
Array.prototype.deletes = function (e) {
  this.splice(e, 1);
  return this
};
Array.prototype.selectOn = function (e) {
  var t = [];
  var n = [];
  var r = [];
  for (var a = 0; a < this.length; a++) {
    if (parseInt(this[a]) <= e) {
      n.push(this[a])
    } else {
      r.push(this[a])
    }
  }
  t.push(n);
  t.push(r);
  return t
};
Date.prototype.format = function (e) {
  var t = {
    "M+": this.getMonth() + 1,
    "d+": this.getDate(),
    "h+": this.getHours(),
    "m+": this.getMinutes(),
    "s+": this.getSeconds(),
    "q+": Math.floor((this.getMonth() + 3) / 3),
    "S+": this.getMilliseconds()
  };
  if (/(y+)/i.test(e)) {
    e = e.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length))
  }
  for (var n in t) {
    if (new RegExp("(" + n + ")").test(e)) {
      e = e.replace(RegExp.$1, RegExp.$1.length == 1 ? t[n] : ("00" + t[n]).substr(("" + t[n]).length))
    }
  }
  return e
};
// 3.jQuery 组件的扩展部分
$.extend(jQuery.easing, {
  easeOut: function (e, t, n, r, a) {
    return -r * (t /= a) * (t - 2) + n
  }
});
$.extend({
  getUrl: function () {
    var e = window.location.pathname;
    var t = e.lastIndexOf("/");
    return e.substr(t + 1, e.length - t)
  }, sethref: function (e, t, n) {
    if (n == 4)return;
    $(e).attr("href", $.getUrl() + "#type=" + t + "&cid=" + n)
  }
});
// 4.公用函数部分
/**
 * 免费直播室 数据更新函数  格式化字符串样式 aaa@bbb@ccc@  直接回传给后台
 * @method changeTageDate
 * @return {[type]} [description]
 */
function changeTageDate() {
  var e = arguments[0];// val
  var t = arguments[1];// add del
  var n = arguments[2];//
  if (t == "add") {
    if (n == 1) {
      var r = $("#tagsss").val();// 添加后的标签的id 664,126,127,128,129,130,
      if (e != "" && typeof e != "undefined" && r.indexOf(e) == -1) {
        r += e + "@";
        r = r.replace(/^\s+|\s+$/g, "");
        $("#tagsss").val(r)
      }
    } else if (n == 2) {
      var r = $("#freeHidden").val();// 添加后的标签的id 664,126,127,128,129,130,
      if (e != "" && typeof e != "undefined" && r.indexOf(e) == -1) {
        r += e + "@";
        r = r.replace(/^\s+|\s+$/g, "");
        $("#freeHidden").val(r)
      }
    }
  } else if (t == "del") {
    if (n == 1) {
      var r = $("#tagsss").val();
      if (typeof e != "undefined" && r.indexOf(e) != -1) {
        r = r.replace(e + "@", " ");
        $("#tagsss").val(r)
      }
    } else if (n == 2) {
      var r = $("#freeHidden").val();
      if (typeof e != "undefined" && r.indexOf(e) != -1) {
        r = r.replace(e + "@", "");
        $("#freeHidden").val(r)
      }
    }
  }
}
/*progress*/
function progressBar() {
//加载状态为complete时移除loading效果
  var e = 0;
  var t = null;
  document.onreadystatechange = n;
  function n() {
    if (document.readyState == "complete") {
      e = 100;
      $("#one_progress").animate({width: e + "%"}, 1e3, function () {
        $(this).animate({opacity: "0"})
      })
    } else {
      t = setInterval(function () {
        if (e <= 90) e++; else clearInterval(t);
        $("#one_progress").animate({width: e + "%"}, 100)
      }, 30)
    }
  }
}
/**
 * roomId 获取
 * @method getLiveRoomId
 * @return {[type]} [description]
 */
function getLiveRoomId() {
  var e = $.trim($("#LiveRoom").text());
  var t;
  $(".LiveRoomList").find("a").each(function (n, r) {
    if ($.trim($(this).text()) == e) {
      t = $(this).attr("roomid")
    }
  });
//return htm!=undefined?html:'请选择直播室';
  return t
}
/**
 * 利用插件重写弹出窗
 * @method Realert
 * @param  {[type]} content [description]
 */
function Randd(e) {
  var t = "";
  for (var n = 0; n < e.length; n++) {
    t = e[Math.floor(Math.random() * e.length)]
  }
  return t
}
// 由于产品需求变更，放弃使用layer插件，重写Realert方法
// function Realert(content){
// 	layer.alert('和讯网警告弹出窗', {
// 		title: 'Duang~ 有个错误哦',
// 	  skin: Randd(['layer-ext-espresso','layui-layer-lan','layui-layer-molv']) , //   layer-ext-espresso   layui-layer-lan
//     extend:'skin/espresso/style.css',
// 		shift: 0,
// 	  closeBtn: Randd([1,2]),
// 		content:content
// 	});
// }
// //小tips
// function tipsuccess(content){
// layer.tips(content, {
//   tips: [1, '#3595CC'],
//    time: 4000
//   });
// }
/**
 * [Realert 重写弹窗，依赖插件center.tip.js;
 * @param {[type]} text [description]
 */
function Realert(e) {
  function t(e, n) {
    if (document.getElementById(e)) {
      return true
    }
    window.setInterval(function () {
      t(e, n)
    }, n)
  }

  function n(e) {
    var n = t(e, 10);
    var r = t(e, 15);
    if (n) {
      showBox("openWrap_unnormal")
    }
    if (r) {
      document.getElementById("openclose").onclick = function () {
        closeBox("openWrap_unnormal");
        setTimeout(function () {
          $("#openWrap_unnormal").remove()
        }, 100)
      }
    }
  }

  var r = '<div class="diaBox w560" id="openWrap_unnormal">      <div class="inviteTit clearfix">        <p class="fl ft18">系统提示：</p>        <a class="openclose fr" id="openclose" href="javascript:; "></a>      </div>      <p class="ft16 fc_6 sys-tips">{{text}}</p>    </div>';
  closeBox("openWrap_unnormal");
  $("#openWrap_unnormal").remove();
  $(r.replace("{{text}}", e)).appendTo($(document.body));
  n("openWrap_unnormal");
  n("openclose")
}
function RealertInt(e) {
  function t(e, n) {
    if (document.getElementById(e)) {
      return true
    }
    window.setInterval(function () {
      t(e, n)
    }, n)
  }

  function n(e) {
    var n = t(e, 10);
    var r = t(e, 15);
    if (n) {
      showBox("openWrap_unnormal");
      var a = parseInt($("#nums").text());
      var i = setInterval(function () {
        a--;
        if (a == 0) {
          clearInterval(i);
          closeBox("openWrap_unnormal");
          $("#openWrap_unnormal").remove();
          Hexun.configurationFile(1)
        }
        $("#nums").text(a)
      }, 1e3)
    }
    if (r) {
      document.getElementById("openclose").onclick = function () {
        closeBox("openWrap_unnormal");
        setTimeout(function () {
          $("#openWrap_unnormal").remove();
          Hexun.configurationFile(1)
        }, 100)
      }
    }
  }

  var r = e.replace(/\D/g, "");
  var a = e.replace(/\d+/gi, '<i id="nums">' + r + "</i>");
  var i = '<div class="diaBox w560" id="openWrap_unnormal">      <div class="inviteTit clearfix">        <p class="fl ft18">系统提示：</p>        <a class="openclose fr" id="openclose" href="javascript:; "></a>      </div>      <p class="ft16 fc_6 sys-tips">{{text}}</p>    </div>';
  closeBox("openWrap_unnormal");
  $("#openWrap_unnormal").remove();
  $(i.replace("{{text}}", a)).appendTo($(document.body));
  n("openWrap_unnormal");
  n("openclose")
}
// 弹出询问层
// function confirems(state,success,fails){
// 	//询问框
// 	layer.confirm(state, {
// 	  btn: ['确认','取消'], //按钮
// 		icon: 4,
// 		skin: 'layui-layer-lan'
// 	},success,function(){
// 		location.reload();
// 	});
// }
// 检测汉字的长度
function strlen(e) {
  var t = 0;
  for (var n = 0; n < e.length; n++) {
    var r = e.charCodeAt(n);
//单字节加1
    if (r >= 1 && r <= 126 || 65376 <= r && r <= 65439) {
      t++
    } else {
      t += 2
    }
  }
  return t
}
/*
 前端身份证信息的判断
 @by qiuyanlong
 */
var aCity = {
  11: "北京",
  12: "天津",
  13: "河北",
  14: "山西",
  15: "内蒙古",
  21: "辽宁",
  22: "吉林",
  23: "黑龙江",
  31: "上海",
  32: "江苏",
  33: "浙江",
  34: "安徽",
  35: "福建",
  36: "江西",
  37: "山东",
  41: "河南",
  42: "湖北",
  43: "湖南",
  44: "广东",
  45: "广西",
  46: "海南",
  50: "重庆",
  51: "四川",
  52: "贵州",
  53: "云南",
  54: "西藏",
  61: "陕西",
  62: "甘肃",
  63: "青海",
  64: "宁夏",
  65: "新疆",
  71: "台湾",
  81: "香港",
  82: "澳门",
  91: "国外"
};
function checkCard_ID(e) {
  var t = e.length;
  var n = 11;//身份证算法求模关键值
  var r = 15;//旧身份证长度
  var a = 18;//新身份证长度
  var i = "19";//新身份证年份标志
  var o = new Array;//位权值数组
  var s = new Array;
  var u = "";//生日
  var l = "";//校验位
  var f = 0;//数字和
  var c = /^\d{15,17}([\dxX]{1})?$/;
  if (t != 15 && t != 18) {
//Realert("身份证长度必须为15或18位.");
    return false
  }
  if (!c.test(e)) {
//Realert("身份证号码必须为数字(18位的新身份证最后一位可以是x).");
    return false
  }
  if (aCity[parseInt(e.substr(0, 2))] == null) {
//Realert("身份证号码第1-2位地区不正确！");
    return false
  }
  if (t == 15) {
    u = "19" + e.substring(6, 8) + "-" + e.substring(8, 10) + "-" + e.substring(10, 12)
  } else {
    u = e.substring(6, 10) + "-" + e.substring(10, 12) + "-" + e.substring(12, 14)
  }
  if (!commonJs.isDate(u)) {
// Realert("身份证号码中的日期格式不对(第6-12位).");
    return false
  }
  if (t == 18) {
    for (var p = 0; p < a - 1; p++) {
      var v = Math.pow(2, a - 1 - p);
      o[p] = v % 11
    }
    for (var p = 0; p < t - 1; p++) {
      s[p] = e.charAt(p);
      s[p] = s[p] * o[p];
      f = f + s[p]
    }
//Realert(numSum);
    l = 12 - f % 11;
//Realert(checkDigit);
    switch (l) {
      case 10:
        l = "X";
        break;
      case 11:
        l = 0;
        break;
      case 12:
        l = 1;
        break
    }
//Realert(ID_card.charAt(17).toUpperCase() + " , " + checkDigit);
// check last digit
    if (e.charAt(17).toUpperCase() != l) {
//Realert("身份证最后一位校验码不对，应该为"+checkDigit+".");
      return false
    }
  }
//Realert( ID_card+"为正确的身份证号码." );
  return true
}
// 上传图片加载完修正鼠标指针位置。
function set_focus(e) {
  e = e[0];// jquery 对象转dom对象
  e.focus();
  var t = navigator.userAgent.toLowerCase();
  var n = t.indexOf("msie") > -1;
  if (n) {
    var r;
    e.focus();
    r = document.selection.createRange();
    r.moveStart("character", -e.innerText.length);
    var a = r.text;
    for (var i = 0; i < e.innerText.length; i++) {
      if (e.innerText.substring(0, i + 1) == a.substring(a.length - i - 1, a.length)) {
        result = i + 1
      }
    }
  } else {
    var o = document.createRange();
    o.selectNodeContents(e);
    o.collapse(false);
    var s = window.getSelection();
    s.removeAllRanges();
    s.addRange(o)
  }
}
/**
 * 该方法是用于再申请收费直播室的确认输入框总汉字的总数 5-10 个汉字
 * @return number
 */
function checkInputNum(e) {
  var t = e.val().replace(/^\s+|\s+$/g, "");
  var n = Math.ceil(strlen(t) / 2);
  if (n > 5) {
    Realert("您的自定义的标的必须是小于5个字哦~");
    e.val("");
    return false
  }
}
function getId(e) {
  return typeof e == "string" ? document.getElementById(e) : e
}
function cls(e, t, n) {
//var reg = /[^x00-xff]/gm;
//var str = obj.value.replace(reg, 'aa');
  var r = e.value;
  var t = getId(t);
  if (r.length > n) {
    var a = 0, i = [];
    for (var o = 0; o < e.value.length; o++) {
// /[^x00-xff]/.test(obj.value.charAt(i)) ? n += 2 : n += 1;
      a += 1;
      if (a > n)break;
      i.push(e.value.charAt(o))
    }
    e.value = i.join("");
    t.innerHTML = n + "/" + n
  } else {
    t.innerHTML = r.length + "/" + n
  }
}
//性别背景认证选择;  s=>sex  b=> backgroud infomations
function chose(e, t, n) {
  var r = false;
  var a = [];
  e.click(function () {
    if (n == "s") {
      e.removeClass("on");
      $(this).addClass("on")
    } else if (n == "b") {
//checks.removeClass('on');
      if ($(this).hasClass("on")) {
        t.slideUp(500);
        $("#Editor").empty();
        $(this).removeClass("on")
      } else {
        t.slideDown(500);
        document.getElementById("Editor").focus();
        e.removeClass("on");
        $(this).addClass("on")
      }
    }
  })
}
//标签切换统一代码;
var tabs = function (e, t) {
  e.click(function () {
    var n = e.index(this);
    e.removeClass("on");
    $(this).addClass("on");
    t.hide();
    t.eq(n).show()
  })
};
/**
 推按上传检测：
 **/
function checkupload_uploadimage(e) {
// 检测这个属性
  if (typeof FileReader === "undefined") {
    uploadImage()
  } else {
    new H5_upload(e).init()
  }
}
/**
 *  上传头像抓取cookie  其他地方不建议使用这个函数 直接使用jquery cookie 14kb
 */
var wCookie = {};
wCookie.Cookies = {
  gmt: 288e5, sw: function (e) {
//时间转换
    var t = new String(e).length, n = e.substring(1, t) * 1,//取数字
      r = e.substring(0, 1);//取单位s\h\d
    switch (r) {
      case"s":
        return n * 1e3;
        break;
      case"h":
        return n * 1e3 * 60 * 60;
        break;
      case"d":
        return n * 1e3 * 60 * 60 * 24;
        break
    }
  }, get2: function (e) {
    var e = " " + e;//获取cookie时 浏览器会添加一个空格，匹配时需要添加上
    var t = document.cookie.split(";"), n = [], r = 0, a = 0;
    var i = new RegExp("^(" + e + ")", "ig");
    for (var o = 0; o < t.length; o++) {
      if (i.test(t[o])) {
        a = t[o].replace(e + "=", "");
        break
      }
    }
    return a
  }, get: function (e) {
    var e = " " + e;//获取cookie时 浏览器会添加一个空格，匹配时需要添加上
    var t = document.cookie.split(";"), n = [], r = 0;
    for (var a = 0; a < t.length; a++) {
      n.push(t[a].split("="))
    }
    for (r = n.length - 1; r > -1; r--) {
      if (e == n[r][0]) {
        return n[r][1]
      }
    }
  }, set: function (e, t, n) {
    var r = cookies.sw(n);
    var a = new Date;
    a.setTime(a.getTime() + cookies.gmt + r * 1);
    document.cookie = e + "=" + escape(t) + ";expires=" + a.toGMTString()
  }, remove: function (e) {
    var t = new Date;
    t.setTime(t.getTime() - 1);
    var n = this.get(e);
    if (n) {
      document.cookie = e + "=" + n + ";expires=" + t.toGMTString()
    }
  }
};
// JavaScript Document
function showBox(e) {
  var t = document.all ? true : false;
//var isIE6 = isIE && ([/MSIE (\d)\.0/i.exec(navigator.userAgent)][0][1] == 6);
  var i = t && [/MSIE (\d+)\.0/i.exec(navigator.userAgent)][0][1] == 6;//¼æÈÝie10£¬IE10²»Ö§³Ö¼ì²âIE6µÄ´úÂë
  var n = document.getElementById(e);
  n.style.zIndex = "8999";
  n.style.display = "block";
  if (!i) {
    var a, l, o, s;
    a = ($(window).height() - n.offsetHeight) / 2 + "px";
    l = ($(window).width() - n.offsetWidth) / 2 + "px";
    $("#" + e).css({marginLeft: l, marginTop: 0, left: 0, top: 0, opacity: "0"});
    $("#" + e).animate({marginLeft: l, marginTop: a, left: s, opacity: "1"}, 500)
  }
  var c = $("#layer").length;
  var d = $("#layer");
  if (c == 0) {
    d = $("<div/>");
    d.attr("id", "layer");
    d.css({width: "100%", height: "100%", top: "0", left: "0"});
    d.css("position", function () {
      return !i ? "fixed" : "absolute"
    });
    d.appendTo("body");
    ishaslayer = true
  }
  d.css({background: "#000", "z-Index": "8998", opacity: "0.7", display: ""});
  var r = document.getElementsByTagName("select");
  for (var m = 0; m < r.length; m++) {
    r[m].style.visibility = "hidden"
  }
  var h = n.getElementsByTagName("select");
  for (var m = 0; m < h.length; m++) {
    h[m].style.visibility = "visible"
  }
  function y() {
    d.style.width = Math.max(document.documentElement.scrollWidth, document.documentElement.clientWidth) + "px";
    d.style.height = Math.max(document.documentElement.scrollHeight, document.documentElement.clientHeight) + "px"
  }

  /*if (isIE) {
   layer.style.filter = "alpha(opacity:70)";
   }*/
  if (i) {
    y();
    window.attachEvent("onresize", y)
  }
}
function closeBox(e) {
  $("#" + e).animate({marginTop: "0", top: "-50%", opacity: "0"}, 300, function () {
    $(this).hide();
    if ($("#layer").length > 0) {
      $("#layer").hide()
    }
  });
//newbox.style.display = "none";
  var t = document.getElementsByTagName("select");
  for (var i = 0; i < t.length; i++) {
    t[i].style.visibility = "visible"
  }
}
/**
 * @info(): co-hexun liver
 *  ps： 用户进来到这个页面之后 1 首先检查是不是登陆用户 2 其次检测是不是合作者
 *
 */
var domain = "http://partner.px.hexun.com";
var teacher = "http://api.zhibo.hexun.com";

var Hexun = {
// 全网检测用户登录
  checklogin: "http://reg.tool.hexun.com/wapreg/checklogin.aspx?format=json&encode=no",
// 获取合作者的基本信息(必须是登录用户)
  conallInfo: domain + "/api/partner/get_detail_info",
// review": 0没有提交  1 提交待审核  2 success 3 recect  reviewreply:reason
// 修改用户名
  changeName: domain + "/api/partner/check_name",
// 发送短信验证码(必须是登录用户)
  sendMessage: domain + "/api/partner/sendcode",
// 绑定手机号(必须是登录用户)
  bindMobile: domain + "/api/partner/binding_phone",
// 保存提交页面信息(必须是登录用户)
  formSubDate: domain + "/api/partner/fill_detail_info",
// 标签获取跟查询(必须是登录用户)
  tagGetAndset: domain + "/api/partner/get_tags",
//保存标签
  reseverTages: domain + "/api/partner/set_tags",
// 获取标签
  getReseverPages: domain + "/api/partner/get_tags",
// 失败页面驳回
  rejectWhy: domain + "/api/partner/get_detail_info",
// 投顾
  adviserInfo: domain + "/api/partner/fill_adviser_info",
// 老师后台管理获取直播室id 参数必须加上合作者ID
  getLiveRoomInfo: teacher + "/api/user/get_teacher_rooms",
// 保存直播室信息  如果roomid为空的话，是保存，否则就默认是编辑
  reserveLiveRoom: teacher + "/api/user/request_zhibo_room",
// 判断是不是助理
  isAssiantes: teacher + "/api/user/is_teacher_assistant",
  pic: {boy: "http://logo3.tool.hexun.com/137d802-40.jpg ", girl: "http://logo0.tool.hexun.com/1a8bf0d-40.jpg"},
  init: function () {
    this.dataInit();// 检测登录
    this.regOnePageSendMessage();
    this.dialoag();// 修改手机号弹窗
    Hexunliver.formValiDateCheck(2)
  },
  configurationFile: function (e) {// 配置信息的文件
    var a = "";
    switch (e) {
      case 1:
        a = "request.html";
        break;// reg1
      case 2:
        a = "parterTagSelect.html";
        break;// reg2
      case"q1":
        a = "request.html?q=changeInfo";
        break;
      case"q2":
        a = "parterTagSelect.html?q=1";
        break;
      case"admin":
        a = "http://zhibo.hexun.com/teacher/admin/parterAllInfo.html";
        break;
      default:
        return console.error("page return to maybe has error happend!");
        break
    }
    return window.location.href = a
  },
  dataInit: function () {
    var e = this;
    commonJs.jsonps(e.checklogin, "", function (a) {
      if (a.islogin == "False") {
        popupLogin()
      } else {
        var n = a.islogin == "False" ? false : true;
        e.login_quet(n, a.nickname);
// 助理检测
        e.isAssiant();
        if ($.getUrl() == "request.html") {
// 只有在首页的时候加载h5上传的插件，在其他页面就不在进行加载。
          checkupload_uploadimage(a.userid)
        }
        Hexunliver.reFreashDateParterInfo()
      }
    })
  },
  isAssiant: function () {
// 判断当前用户是不是助理，助理是不能成为合作者
    var e = this;
    commonJs.jsonps(e.isAssiantes, "", function (e) {
      if (e.resultKey == "ok") {
// 是助理
        Realert("您当前是老师助理，系统不允许助理申请成为合作者");
        var a = setTimeout(function () {
          window.location.href = "http://zhibo.hexun.com/";
          clearTimeout(a)
        }, 3e3)
      }
    })
  },
  login_quet: function (e, a) {
    var n = this;
    if (!e) {
      var t = '<a href="javascript:popupLogin();">登录</a> <a class="c-f35e4e" href="https://reg.hexun.com/regname.aspx?gourl=http://zhibo.hexun.com/" target="_blank">注册</a> <span class="i-line"></span>';
      document.getElementById("loginuser").innerHTML = t
    } else {
      var s = "<a href='http://zhibo.hexun.com/user/profile.html' target='_blank'>" + a + "</a> ";
      s += "<a href='http://utility.tool.hexun.com/Quit.aspx?gourl=" + location.href + "' class='c-f35e4e'>退出</a><span class='i-line'></span>";
      document.getElementById("loginuser").innerHTML = s
    }
  },
  dialoag: function () {
    $(".chanTele_number").click(function (e) {
      if (e && e.preventDefaule) {
        e.preventDefaule()
      }
      showBox("openWrap_tel")
    });
    $(".openclose").click(function (e) {
      if (e && e.preventDefaule) {
        e.preventDefaule()
      }
      closeBox("openWrap_tel") || closeBox("openWrap_mod_zt")
    });
    this.changeBindPhoneNumber()
  },
  checkBindPhone: function () {
    commonJs.jsonps(this.conallInfo, "", function (e) {
      if (!!e.data.phone) {
// 判断是已经绑定手机号的用户
        $("#iphone_n").addClass("show");
        $("#iphone_y").addClass("hide");
        var a = commonJs.plusXing(e.data.phone, 3, 4);
        $("#cellphone").attr("data-tel", e.data.phone || "");
        $("#cellphone").html(a)
      } else {
// 没有绑定手机号码
        $("#iphone_n").addClass("hide");
        $("#se_send").addClass("show")
      }
    })
  },
  changeBindPhoneNumber: function () {
// 绑定手机号用户修改绑定手机号码以及发送验证码，加错误抖动效果
    var e = null;
    var a;//当前剩余秒数
    var n;// 验证码 checkCodeInput
    var t = false;
    var s = this;
    $("#bindIphone").on({
      blur: function () {
        if (!commonJs.verifyMobile($.trim($(this).val()))) {
          $("#openWrap_tel").addClass("shake").addClass("st");
          $(this).parent().siblings().show(500).html("请输入正确的手机号");
          $(this).addClass("n_error")
        }
      }, focus: function () {
        $("#openWrap_tel").removeClass("shake").removeClass("st");
        $(this).parent().siblings().hide(500);
        $(this).removeClass("n_error")
      }
    });
    $("#sendCheckCode").click(function (t) {
// e.preventDefault();
      var r = $.trim($("#bindIphone").val());
      if (!$(this).hasClass("btn_bg_gray")) {
        if (r != "" && !$("#bindIphone").hasClass("n_error")) {
          $(this).addClass("btn_bg_gray");
// 设置网络的延时时间
          a = 60;
          e = window.setInterval(function () {
            i(60)
          }, 1e3);
          $.ajax({
            url: s.sendMessage,
            type: "GET",
            data: {phone: r},
            dataType: "jsonp",
            cache: false,
            success: function (a) {
              if (a.resultKey == "ok") {
                alert("发送成功")
              } else if (a.resultKey == "phone_is_used") {
                $(".shouji_y").show(500).html("手机号已被占用，请使用其他手机号验证");
                $("#openWrap_tel").addClass("shake").addClass("st");
                window.clearInterval(e);
                $("#sendCheckCode").text("发送验证码").removeClass("btn_bg_gray")
              } else {
                $(".shouji_y").show(500).html("发送失败，请重新发送！");
                $("#openWrap_tel").addClass("shake").addClass("st");
                window.clearInterval(e);
                $("#sendCheckCode").text("发送验证码").removeClass("btn_bg_gray")
              }
            },
            error: function (e, a, n) {
              Realert("网络延时，请重新尝试...")
            }
          }).done(function () {
            n = $("#checkCodeInput").val()
          })
        }
      }
    });
//设置计时器
    function i() {
      if (a == 0) {
        window.clearInterval(e);//停止计时器
        $("#bindIphone").attr("disabled", false);
        $("#sendCheckCode").text("发送验证码").removeClass("btn_bg_gray");
        $("#checkCodeInput").val(" ")
      } else {
        a--;
        $("#bindIphone").attr("disabled", true);
        $("#sendCheckCode").text(a + "s")
      }
    }

// 修改绑定手机号-发送验证码
    $("#changeIphone").click(function () {
      if ($("#checkCodeInput").val() != " " && $("#bindIphone").val() != " ") {
        $.ajax({
          url: s.bindMobile,
          type: "POST",
          dataType: "jsonp",
          data: {phone: $("#bindIphone").val(), code: $.trim($("#checkCodeInput").val())},
          success: function (e) {
            if (e.resultKey == "ok") {
// 1关闭当前页面
              closeBox("openWrap_tel");
// 2绑定成功 弹出提示词绑定成功
              setTimeout(function () {
                Realert("修改成功！")
              }, 300);
// 3. 刷新新的请求
              $("#iphone_n").addClass("show");
              $("#iphone_y").addClass("hide");
              var a = commonJs.plusXing($.trim($("#bindIphone").val()));
              $("#cellphone").html(a);
              $("#cellphone").data("data-tel", $("#bindIphone").val());
// 4. 清空当前表单的数据
              $("#bindIphone").val("");
              $("#checkCodeInput").val("")
            } else {
              $(".reginfo_y").show()
            }
          }
        })
      }
    })
  },
  regOnePageSendMessage: function () {
// 未绑定手机号码，发送验证码
    $("#reg1_send").click(function () {
      var e = $.trim($("#myCellphone").val());
      if (e == "")return;
      if (!commonJs.verifyMobile(e))return;
      var a = null;
      var n = 60;
      if (!$(this).hasClass("btn_bg_gray")) {
        commonJs.jsonps(Hexun.sendMessage, {phone: e}, function (e) {
          if (e.resultKey == "ok") {
            $("#reg1_send").addClass("btn_bg_gray");
            Realert("发送成功");
            var t = "";
            a = setInterval(function () {
              n--;
              if (n == 0) {
                t = "发送验证码";
                clearInterval(a);
                $("#myCellphone").attr("disabled", false);
                $("#reg1_send").removeClass("btn_bg_gray")
              } else {
                t = n + "s";
                $("#myCellphone").attr("disabled", true)
              }
              $("#reg1_send").text(t)
            }, 1e3)
          } else if (e.resultKey == "phone_is_used") {
            Realert("手机号被占用")
          } else {
            Realert("发送失败，请重新发送！")
          }
        })
      }
    })
  },
  checkboxAjaxListForDom: function () {
    var e = this;
// 下拉
    $(".g-zbr-tzlist li").find(".g-i-r").click(function () {
      var e = false;// 子元素全部选准的标志位
      if (!$(this).parents("li").hasClass("on")) {
        $(this).parents("li").addClass("on");
        $(this).parents("li").find(".g-zbr-tz").slideDown(100)
      } else {
        $(this).parents("li").removeClass("on");
        $(this).parents("li").find(".g-zbr-tz").slideUp(100)
      }
      /**
       * 以下代码是针对投资方法左侧下拉收起自标的进行ui的操作
       */
      $(this).parents("li").find(".g-zbr-tz").find(".g-i-checkbox").each(function (a, n) {
        if (!$(n).hasClass("g-i-cheon")) {
          e = true
        }
      });
      if (!e) {
// 如果子元素全部被选准
        $(this).siblings(".se_all").addClass("g-i-cheon")
      } else {
        $(this).siblings(".se_all").removeClass("g-i-cheon")
      }
    });
    /**
     * 全局侦测函数
     * 原理：每一次点击checbox的时候，会自动循环所在父级的所有标的，然后进行展示选择
     * 使用范围：投资方法需要检测每一个子标的，如果有一个没选，则父标的就不选准，反之，父标的就处于选准的状态。
     * args: obj 当前操作元素
     */
    function a(e) {
// 只针对子标的，如果有这样子父标的的就属于子元素
      if ($(e).parent(".g-zbr-tzl")) {
        var a = false;// false=全选
        var n = $(e).parents(".g-zbr-tz").find(".g-i-checkbox");
        n.each(function (e, n) {
          if (!$(n).hasClass("g-i-cheon")) {
// 检测到如果有一个元素没有选准，则就不是全选
            a = true
          }
        });
        if (!a) {
// 全选的操作
          $(e).parents(".g-zbr-tz").siblings(".se_all").addClass("g-i-cheon")
        } else {
// 局部选准
          $(e).parents(".g-zbr-tz").siblings(".se_all").removeClass("g-i-cheon")
        }
      }
    }

    $(".fenlei .g-i-checkbox").click(function () {
      var e = $(this).attr("tagId");
      var n = $(this).attr("tagType");
      var t = $(this).attr("tagName");
      if (!$(this).hasClass("se_all")) {
// 实现单选
        if ($(this).hasClass("g-i-cheon")) {
          $(this).removeClass("g-i-cheon");
          s(n, t, "del");
          i(e, "del")
        } else {
          $(this).addClass("g-i-cheon");
          s(n, t, "add");
          i(e, "add")
        }
      } else {
// 实现多选
        if (!$(this).hasClass("g-i-cheon")) {
          $(this).parents("li").addClass("on");
          $(this).parents("li").find(".g-zbr-tz").slideDown(600);
          $(this).addClass("g-i-cheon").siblings(".g-zbr-tz").find("span").addClass("g-i-cheon");
          r($(this).parent(".on").find(".g-i-cheon"), "add")
        } else {
          r($(this).parent(".on").find(".g-i-cheon"), "del");
          $(this).parents("li").removeClass("on");
          $(this).parents("li").find(".g-zbr-tz").slideUp(800);
          $(this).removeClass("g-i-cheon").siblings(".g-zbr-tz").find("span").removeClass("g-i-cheon")
        }
      }
      a(this)
    });
// 自定义输入
    var n = "";
    $(".bd-div input").on({
      focus: function (e) {
        nowV = $.trim($(this).val())
      }, blur: function () {
// ui
        if ($.trim($(this).val()) != "") {
          var e = checkInputNum($(this));
          if (e == false)return;
          $(this).addClass("orange_bor").attr("disabled", true).siblings("i").show()
        } else {
          $(this).removeClass("orange_bor").siblings("i").hide()
        }
// data
        var a = $(this).parent().parent().parent().children().eq(0).text();
        var n = $.trim($(this).val());
        var i = "自定义投资标的:";
        var r = "自定义投资方法:";
        var o = false;
        if (n == "")return;
        $(".tagwrap span").each(function () {
          var e = $(this).text();
          e = e.replace(/^\s+|\s+$/g, "");
          if (e != "" && n == e) {
            o = true
          }
        });
        if (!o) {
          if (a == i) {
            s(1, n, "edit");
            t(n, "add", 1)
          } else if (a == r) {
            s(2, n, "edit");
            t(n, "add", 2)
          }
        } else {
          Realert("已经存在此标签");
          $(this).val("").removeClass("orange_bor").attr("disabled", false).siblings().hide(500)
        }
      }
    });
// 自定义的删除
    $(".taglist i").click(function () {
      var e = $.trim($(this).siblings().val());
      var a = "自定义投资标的:";
      var n = "自定义投资方法:";
      var i = $(this).parent().parent().parent().children().eq(0).text();
      if (i == a) {
        s(1, e, "del");
        t(e, "del", 1)
      } else {
        s(2, e, "del");
        t(e, "del", 2)
      }
      $(this).siblings("input").removeClass("orange_bor").val("").attr("disabled", false);
      $(this).hide()
    });
// 二次改版需求变更部分，单独对input进行修改
//   hdtagNames1 : 投资标
//   hdtagNames2 : 投资方法
    function t() {
      var e = arguments[0];// val
      var a = arguments[1];// add del
      var n = arguments[2];//
      if (a == "add") {
        if (n == 1) {
          var t = $("#hdtagNames1").val();// 添加后的标签的id 664,126,127,128,129,130,
          if (e != "" && typeof e != "undefined" && t.indexOf(e) == -1) {
            t += e + ",";
            t = t.replace(/^\s+|\s+$/g, "");
            $("#hdtagNames1").val(t)
          }
        } else {
          var t = $("#hdtagNames2").val();// 添加后的标签的id 664,126,127,128,129,130,
          if (e != "" && typeof e != "undefined" && t.indexOf(e) == -1) {
            t += e + ",";
            t = t.replace(/^\s+|\s+$/g, "");
            $("#hdtagNames2").val(t)
          }
        }
      } else if (a == "del") {
        if (n == 1) {
          var t = $("#hdtagNames1").val();
          if (typeof e != "undefined" && t.indexOf(e) != -1) {
            t = t.replace(e + ",", " ");
            $("#hdtagNames1").val(t)
          }
        } else {
          var t = $("#hdtagNames2").val();
          if (typeof e != "undefined" && t.indexOf(e) != -1) {
            t = t.replace(e + ",", "");
            $("#hdtagNames2").val(t)
          }
        }
      }
    }

// 单独针对投资表部分如果超过三个就关闭输入框
// 不管是自定义还是输入，只要超过三个就关闭
    /**
     *  实现标签的CRUD 投资标准的id>130  方法的小于等于130
     */
    function s() {// setTage(type,val,act,text)
      var e = arguments[0];
      var a = arguments[1];
      var n = arguments[2];
      var t = arguments[3];
//var tagId = arguments[4];
      if (n == "add") {
        var i = false;
        $(".tagwrap>div>span").each(function () {
          var e = $(this).text();
          e = e.replace(/^\s+|\s+$/g, "");
          if (e != "" && a == e) {
            i = true
          }
        });
        if (i) {
          Realert("标签已存在'" + a + "'");
          return
        }
        var r = ["g-bg-5d9cec", "g-bg-fc6e51", "g-bg-967bdc", "g-bg-50c1e9", "g-bg-f45068", "g-bg-f79c18", "g-bg-f9704e", "g-bg-f1c40f"];
        var l = Math.floor(Math.random() * r.length);
        var d = " <span class='" + r[l] + " fl g-bd-result'>" + a + "</span> ";
// 投资标1
        if (e == 1) {
          $(d).appendTo($("#sub"))
        } else if (e == 2) {
          o(a);
          $(d).appendTo($("#fun"))
        }
      } else if (n == "del") {
        $(".tagwrap span").each(function () {
          var n = $(this).text();
          n = n.replace(/^\s+|\s+$/g, "");
          if (n != "" && a == n) {
            if (e == 1) {
              $("#sub span:contains('" + a + "')").remove()
            } else {
              $("#fun span:contains('" + a + "')").remove()
            }
          }
        })
      } else if (n == "edit") {// setTage(type,val,act,text)
        $(".tagwrap>div>span").each(function (a) {
          var n = $(this).text();
          n = n.replace(/^\s+|\s+$/g, "");
          if (n != "" && t == n) {
            if (e == 1) {
              $("#sub span:contains('" + t + "')").remove()
            } else {
              $("#fun span:contains('" + t + "')").remove()
            }
          }
        });
        s(e, a, "add")
      }
    }

//单个设置标签ids  每次CRUD后实现隐藏域表单的数据更新 删除
    function i() {//setTagIds(tag,act,text)
      var e = arguments[0];
      var a = arguments[1];
      var n = arguments[2];
      if (a == "add") {
        var t = $("#hdtagIds").val();// 添加后的标签的id 664,126,127,128,129,130,
        if (e != "" && typeof e != "undefined" && t.indexOf(e) == -1) {
          t += e + ",";
          $("#hdtagIds").val(t)
        }
      } else if (a == "del") {
        var t = $("#hdtagIds").val();
        if (e != "" && typeof e != "undefined" && t.indexOf(e) != -1) {
          t = t.replace(e + ",", "");
          $("#hdtagIds").val(t)
        }
      } else if (a == "edit") {
        var t = $("#hdtagIds").val();
        if (n != "" && typeof n != "undefined" && t.indexOf(n) != -1) {
          t = t.replace(n + ",", "");
          $("#hdtagIds").val(t)
        }
        if (e != "" && typeof e != "undefined" && t.indexOf(e) == -1) {
          t += e + ",";
          $("#hdtagIds").val(t)
        }
      }
    }

//循环设置显示/隐藏标签结果
    function r(e, a) {
      if (a == "add") {
        $(e).each(function () {
          var e = $(this).attr("tagId");
          var a = $(this).attr("tagType");
          var n = $(this).attr("tagName");
          if (typeof a != "undefined" && typeof e != "undefined" && typeof n != "undefined") {
            i(e, "add");
            s(a, n, "add")
          }
        })
      } else {
        $(e).each(function () {
          var e = $(this).attr("tagId");
          var a = $(this).attr("tagType");
          var n = $(this).attr("tagName");
          if (typeof a != "undefined" && typeof e != "undefined" && typeof n != "undefined") {
            i(e, "del");
            s(a, n, "del")
          }
        })
      }
    }

// 点击全选的时候 选择全部的标签 如果以前有已经选择过的 则不再选择
    function o(e, a) {
      var n = $("#fun").find("span");
      n.each(function (a, n) {
        if ($.trim($(this).text()) == e) {
          $(this).remove();
          return true
        }
      })
    }
  }
};
window.Hexun = Hexun;
console.log('**********')
console.log(Hexun)
/**
 * Created by qiuyanlong on 2016/8/15 0015.
 *
 */
var Hexunliver = {
  reFreashDateParterInfo: function () {
// 实现合作者入驻首页数据的刷新回填写
    return function () {
      commonJs.jsonps(Hexun.conallInfo, "", function (e) {
        if (e.resultKey == "ok") {
          if ($.getUrl() == "servcedoc.html" || $.getUrl() == "searchList.html")return;
          if ($.getUrl() == "request.html") {
            if (e.data.nickName) {
              $("#username").val(e.data.nickName)
            }
            if (e.data.userPhone) {
              var a = e.data.userPhone.replace("-40", "-150");
              $("#touxiang img").attr("src", a)
            }
            if (!!e.data.phone) {
// 判断是已经绑定手机号的用户
              $("#iphone_n").addClass("show");
              $("#iphone_y").addClass("hide");
              var r = commonJs.plusXing(e.data.phone);
              $("#cellphone").data("data-tel", e.data.phone);// 对当前的手机号码进行缓存，提交表单用
              $("#cellphone").html(r)
            }
          }
          if (e.data.Partner && $.getUrl() == "request.html") {
            var t = e.data.Partner.blog;
            var n = e.data.Partner.city;
            var l = e.data.Partner.email;
            var s = e.data.Partner.id;
            var i = e.data.Partner.intro;
            var m = "直播人";
            var o = e.data.Partner.notice;
            var c = e.data.Partner.noticeInfo;
            var u = e.data.Partner.phone;
            var p = e.data.Partner.province;
            var d = e.data.Partner.qq;
            var f = e.data.Partner.review;
            var _ = e.data.Partner.sex;
            var g = e.data.Partner.truename;
            var h = e.data.Partner.noticeType;
            var c = e.data.Partner.noticeInfo;
            var y = e.data.userPhone;
            var v = e.data.Partner.orgname;
            var q = e.data.Partner.busDepartment;
            var x = e.data.Partner.jobCode;
// 初始化到页面中
            $("#blog").val(t);
            $("#qq").val(d);
            $("#sub_s").text(p);// 省份
            $("#sub_c").text(n);// 城市
            getCity(getIndex(p), cityArr, function () {
              $("#city_P").find(".selectHide a").click(function () {
                $(this).parents(".cityP").find(".select").text($(this).text())
              });
              $(".city ").find("i").removeClass("arrowDown").addClass("arrowUp")
            });// 需要回填写所有的城市列表
            $("#email").val(l);
            $("#intro").val(i);
            $("#realname").val(g);
            $("#myCellphone").val(u);
            $("#cellphone").attr("data-tel", u || "");
            commonJs.returnSexAndbackgroud($("#sex"), "setting", _);
            var z = commonJs.returnSexAndbackgroud($("#bjrz"), "setting", h);
            if (!z) {
              $("#zr-info").removeClass("hide").slideUp(500)
            } else {
              if (h != "" && c != "") {
// 背景认证以及认证资料不为空、
                $("#Editor").html(c);
                $("#zr-info").removeClass("hide").slideDown(500)
              }
            }
            $("#touxiang img").attr("src", y.replace("-40", "-150"));
            $("#company").val(v);
            $("#yingyebu").val(q);
            $("#zizhinumber").val(x);
            $("#zishu").text(Math.floor(strlen($("#intro").val()) / 2));
//
            $(".info_editor").hide()
          }
        }
      })
    }()
  }, getPartnerId: function (e) {
    commonJs.jsonps(Hexun.conallInfo, "", function (a) {
      if (a.resultKey && a.resultKey == "ok") {
        if (a.data.Partner) {
          e && e(a.data.Partner.partnerId)
        }
      }
    })
  }, formValiDateCheck: function (e) {
    function a(e) {
      mylang = {
        required: "您的输入不能为空",
        check: "请检查您的输入信息",
        realname: "姓名不符合规范，应该介于2-8个字符之间",
        email: "请检查您的邮箱地址",
        blog: "请检查输入正确的博客地址,一般是一个合法的url的地址，类似：https://www.hexun.com/",
        iphone: "您的手机号码有误",
        minL: " 姓名最小是2个字节",
        maxL: " 姓名最长是10个字节",
        qq: "qq号码是由小于10位的数字组成",
        intro: "请输入150-500字的个人简介",
        mobile: "请输入合法的11位手机号码",
        code: "请输入6位验证码",
        compM: "公司名称不能超过是20个字",
        min2: "长度最小不能少于2个字符",
        yingyebu: "营业部明后最多不能超过30个字符"
      };
      return mylang[e]
    }

//3.1 中英文的输入
    jQuery.validator.addMethod("checkZH", function (e, a) {
      var r = /[^\u4E00-\u9FA5a-zA-Z$]/;
      if (r.test(e))return false;
      return true
    }, "<p class='fl m_l_0 yzm-tips fc_9  enames'>姓名只能是字母或者汉字</p> ");
//3.2.qq的再次验证
    jQuery.validator.addMethod("qq", function (e, a) {
      var r = new RegExp("^[1-9][0-9]{4,9}$", "g").test(e);
      if (r) {
        return true
      } else return false
    }, "<p class='fl m_l_0 yzm-tips fc_9  enames'>请再次检查qq号码的格式</p>");
//3.2.手机号码验证 添加上了测试号码
    jQuery.validator.addMethod("cellphone", function (e, a) {
      var r = /^(((13[0-9]{1})|(15[0-9]{1})|(20[0-9]{1})|(18[0-9]{1})|(17[0-9]{1}))+\d{8})$/;
      if (!r.test(e)) {
        return false
      }
      return true
    }, "<p class='fl m_l_0 yzm-tips fc_9  enames'>请输入合法的11位手机号码</p>");
    $("#myInformation1").validate({
      highlight: function (e, a, r) {
// element 表示element 就是当前发生错误的元素
// errorClass 是当前这个元素的状态： 是错误还是正确 error
// validClass 一般是valid
        if ($(e).attr("id") == "myCellphone") {
          if (a == "error") {
            $(e).addClass("cell_error").addClass("shake").addClass("st")
          }
        }
      },
      unhighlight: function (e, a, r) {
        if ($(e).attr("id") == "myCellphone") {
          $(e).removeClass("cell_error").removeClass("shake").removeClass("st")
        }
      },
      rules: {
        realname: {required: true, checkZH: true, minlength: 2, maxlength: 8},
        company: {minlength: 2, maxlength: 20},
        myCellphone: {required: true, digits: true, minlength: 11, maxlength: 11, cellphone: true},
        code: {required: true, digits: true, minlength: 6, maxlength: 6},
        email: {required: true, email: true},
        qq: {digits: true, maxlength: 10},
        blog: {required: true, url: "url"},
        intro: {required: true, minlength: 150, maxlength: 500},
        renzheng: {required: true},
        company: {minlength: 2, maxlength: 20},
        yingyebu: {minlength: 2, maxlength: 30}
      },
      messages: {
        realname: {
          required: "<p class='fl m_l_0 yzm-tips fc_9  enames'>" + a("required") + "</p>",
          minlength: "<p class='fl m_l_0 yzm-tips fc_9  enames'>" + a("minL") + "</p>",
          maxlength: "<p class='fl m_l_0 yzm-tips fc_9  enames'>" + a("maxL") + "</p>"
        },
        company: {
          minlength: "<p class='fl m_l_0 yzm-tips fc_9  enames'>" + a("compL") + "</p>",
          maxlength: "<p class='fl m_l_0 yzm-tips fc_9  enames'>" + a("compM") + "</p>"
        },
        myCellphone: {
          required: "<p class='fl m_l_0 yzm-tips fc_9  enames'>" + a("required") + "</p>",
          digits: "<p class='fl m_l_0 yzm-tips fc_9  enames'>" + a("qq") + "</p>",
          minlength: "<p class='fl m_l_0 yzm-tips fc_9  enames'>" + a("mobile") + "</p>",
          maxlength: "<p class='fl m_l_0 yzm-tips fc_9  enames'>" + a("mobile") + "</p>"
        },
        code: {
          required: "<p class=' m_l_0 yzm-tips fc_9  enames'>" + a("required") + "</p>",
          digits: "<p class='m_l_0 yzm-tips fc_9  enames'>" + a("qq") + "</p>",
          minlength: "<p class='m_l_0 yzm-tips fc_9  enames'>" + a("code") + "</p>",
          maxlength: "<p class=' m_l_0 yzm-tips fc_9  enames'>" + a("code") + "</p>"
        },
        email: {
          required: "<p class=' m_l_0 yzm-tips fc_9  enames'>" + a("required") + "</p>",
          email: "<p class='fl m_l_0 yzm-tips fc_9  enames'>" + a("email") + "</p>"
        },
        qq: {
          digits: "<p class='fl m_l_0 yzm-tips fc_9  enames'>" + a("qq") + "</p>",
          maxlength: "<p class=' m_l_0 yzm-tips fc_9  enames'>" + a("qq") + "</p>"
        },
        blog: {
          required: "<p class=' m_l_0 yzm-tips fc_9  enames'>" + a("required") + "</p>",
          url: "<p class='fl m_l_0 yzm-tips fc_9  enames'>" + a("blog") + "</p>"
        },
        intro: {
          required: "<p class='m_l_0 yzm-tips fc_9  enames'>" + a("required") + "</p>",
          minlength: "<p class='m_l_0 yzm-tips fc_9  enames'>" + a("intro") + "</p>",
          maxlength: "<p class='m_l_0 yzm-tips fc_9  enames'>" + a("intro") + "</p>"
        },
        renzheng: {required: "<p class='m_l_0 yzm-tips fc_9  enames'>" + a("required") + "</p>"},
        company: {
          minlength: "<p class='m_l_0 yzm-tips fc_9  enames'>" + a("min2") + "</p>",
          maxlength: "<p class='m_l_0 yzm-tips fc_9  enames'>" + a("compM") + "</p>"
        },
        yingyebu: {
          minlength: "<p class='m_l_0 yzm-tips fc_9  enames'>" + a("min2") + "</p>",
          maxlength: "<p class='m_l_0 yzm-tips fc_9  enames'>" + a("yingyebu") + "</p>"
        }
      }
    });
    $("#nextOne").click(function () {
// 1: 首先检查页面所有必填写项目
      if ($("#sub_c").text() == "城市" || $("#sub_s").text() == "省份") {
        Realert("请选择居住地");
        return
      }
      if ($.trim($("#sub_s").text()) == "" || $.trim($("#sub_c").text()) == "") {
        Realert("居住地选择不能为空");
        return
      }
// new: 所属公司/机构如果有值，则 营业部跟投顾资质证号码必须有值  三者关系是 ： && 且
      var e = document.querySelector("#company"), a = document.querySelector("#yingyebu"),
        t = document.querySelector("#zizhinumber"), n = e.value.replace(/^\s+|\s+$/g, ""),
        l = a.value.replace(/^\s+|\s+$/g, ""), s = t.value.replace(/^\s+|\s+$/g, "");
// 表示三者中进入了某一个表单的值
      if ((n || l || s) && !(n && l && s)) {
//
        Realert("所属公司/机构 和营业部名称 以及投顾资质证号码 三者有一个被填写则其余二者必须要求填写 ");
        return
      }
      if (s) {
        if (!/^[a-zA-Z0-9]{14}$/.test(s)) {
          Realert("资质证号码是14位数字、字母的组合 ");
          return
        }
      }
// 2. 默认是用户同意协议的
      if (!$("#user_agreement").hasClass("on")) {
        Realert("您必须同意用户协议哦");
        return
      }
      if (commonJs.returnSexAndbackgroud($("#bjrz"))[0]) {
// 表示背景认证是被选择过了
        /*
         编辑器内容的匹配
         */
// 过滤 new EditorMin().filter()
        $("#renzheng").val((new EditorMin).filter($("#Editor").html()));
        var i = $("#Editor").text(), m;
        m = $("#renzheng").val();
        if (m.indexOf("img") == -1 && !i.replace(/\s{2,}/, "")) {
// 没有值或者没有插入图，则认为编辑器当前提交内容是空 n.replace(/\s+/,'')||
          Realert("认证资料不能为空");
          return
        }
      }
// 删除多余无意义的换行符号
      $("#renzheng").val($("#renzheng").val().replace(/(<p><br><\/p>)+/g, ""));
// 表单整体检测验证
      if (!$("#myInformation1").valid())return false;
// 开始提交
      setTimeout(function () {
        r()
      }, 100)
    });
// 提交第一页表单事件
    function r() {
      var a = commonJs.returnSexAndbackgroud($("#sex"))[0];
      var r = commonJs.returnSexAndbackgroud($("#bjrz"))[0] != undefined ? commonJs.returnSexAndbackgroud($("#bjrz"))[0] : "";
      var t;
      /*
       绑定手机号逻辑： 入驻没有绑定手机号： 下一步就是绑定
       入驻修改绑定手机号： 下一步没有关系，后台不会处理这个逻辑，所以提交任何东西都无所谓
       */
      var n = {
        realName: $("#realname").val(),
        hdsex: a,
        sfdq_tj: $("#sub_s").text(),// 省份
        csdq_tj: $("#sub_c").text(),// 城市
        mobile: $("#myCellphone").val() || $("#cellphone").data("data-tel"),// 没有绑定手机号码，第一次绑定||修改绑定的手机号码
        pic: $("#touxiang img").attr("src"),
        qq: $("#qq").val() || "",
        email: $("#email").val() || "",
        blog: $("#blog").val() || "",
        orgname: $("#company").val(),
        busDepartment: $("#yingyebu").val(),
        jobCode: $("#zizhinumber").val(),
        intro: $("#intro").val(),
        code: $.trim($("#code").val()) || "",// 验证码
        notice: "",// 背景认证
        notice_type: commonJs.returnSexAndbackgroud($("#bjrz"))[0],// 背景认证类型
        notice_info: $("#renzheng").val(),// 背景认证内容
        level: "直播人"
      };
      commonJs.jsonps(Hexun.formSubDate, n, function (a) {
        if (a.resultKey && a.resultKey == "ok") {
// 页面验证提交成功
          if (commonJs.getSearchString("q") == "changeInfo") {
            e = "q2"
          }
          Hexun.configurationFile(e)
        } else {
          if (a.errorMessage != null) {
            Realert("发生了一点小意外，: " + a.errorMessage)
          }
        }
      })
    }
  }
};
window.Hexunliver = Hexunliver;
var move = false, _X, _Y;
var targetGourl = "";
var isIE = document.all ? true : false;
function StartDrag(e) {//定义准备拖拽的函数 按下鼠标onMousedown
  var t = document.getElementById("alertFram");
  var n = document;
  var e = e ? e : event;
  if (isIE) {
    t.setCapture()
  } else {
    window.captureEvents(Event.MOUSEMOVE | Event.MOUSEUP)
  }
  move = true;
//获取鼠标相对内容层坐标
//_X = parentwin.offsetLeft - e.clientX;
//_Y = parentwin.offsetTop - e.clientY;
  var o = e.pageX || e.clientX + document.documentElement.scrollLeft;
  var l = e.pageY || e.clientY + document.documentElement.scrollTop;
  var r = t.offsetLeft + 103;
  var a = t.offsetTop + (isIE ? -40 : 75);
//alert(e.pageY)
//alert(e.clientY)
  n.onmousemove = function (e) {//定义拖拽函数 鼠标放上拖动onMousemove
    var e = e ? e : event;
    if (move) {
//var parentwin = document.getElementById("alertFram");
//var x = e.clientX + _X;
//var y = e.clientY + _Y;
      var n = e.pageX || e.clientX + document.documentElement.scrollLeft;
      var i = e.pageY || e.clientY + document.documentElement.scrollTop;
//if (x <= 0)
//    x = 0
//if (y <= 0)
//    y = 0
//parentwin.style.left = (x) + "px";
//parentwin.style.top = (y) + "px";
      t.style.left = r + n - o + "px";
      t.style.top = a + i - l + "px";
      t.style.cursor = "move"
    }
  };
  n.onmouseup = function () {//定义停止拖拽函数 松开鼠标onMouseup
//停止对当前对象的鼠标跟踪
    if (isIE) {
      t.releaseCapture()
    } else {
      window.releaseEvents(Event.MOUSEMOVE | Event.MOUSEUP)
    }
    n.onmousemove = null;
    move = false
  }
}
//@mql_modify 2013-4-22 start-------
//g_myBodyInstance = (document.documentElement ? document.documentElement : window);
//window.onscroll = function () {
//    var parentwin = document.getElementById("alertFram");
//    if (parentwin != null) {
//        parentwin.style.top = (window.screen.height * 0.2 + g_myBodyInstance.scrollTop) + "px";
//    }
//};
//@mql_modify 2013-4-22 end-------
var popup_state = false;
function popupLogin() {
  popup("登录", "http://reg.hexun.com/rest/loginbox.aspx?gourl=" + escape(window.location.href), escape(window.location.href), 516)
}
function popupReg() {
  popup("注册", "http://reg.hexun.com/rest/regbox.aspx?gourl=" + escape(window.location.href), escape(window.location.href), 516)
}
function popupLoginLck() {
  popup("登录", "http://reg.hexun.com/rest/loginbox.aspx?lck=1&gourl=" + escape(window.location.href), escape(window.location.href), 516)
}
function popup(e, t, n, o) {
  targetGourl = n;
  if (popup_state == false) {
    popup_state = true;
    popupW(e, t, 558, o)
  }
  return
}
function changeHref() {
  var e = document.getElementById("ifrmlink");
  var t = document.getElementById("ifrmTitle");
  if (e.innerHTML == "注册") {
    e.href = "http://reg.hexun.com/rest/regbox.aspx?gourl=" + targetGourl;
    e.innerHTML = "登录";
    t.innerHTML = "注册"
  } else {
    e.href = "http://reg.hexun.com/rest/loginbox.aspx?gourl=" + targetGourl;
    e.innerHTML = "注册";
    t.innerHTML = "登录"
  }
}
//带有宽度的调用
function popupW(e, t, n, o) {
  var l = "注册";
  var r = "登录";
  var a = "http://reg.hexun.com/rest/regbox.aspx?gourl=" + targetGourl;
  if (e == "注册") {
    r = "注册";
    l = "登录";
    a = "http://reg.hexun.com/rest/loginbox.aspx?gourl=" + targetGourl
  }
  var i;
  try {
    i = window.parent.document.all ? window.event.srcElement : arguments[1]
  } catch (c) {
  }
  var d = window.parent.document.createElement("DIV");
  d.id = "shield";
  d.style.position = "absolute";
  d.style.left = "0px";
  d.style.top = "0px";
  d.style.width = (window.parent.document.documentElement.clientWidth > window.parent.document.documentElement.scrollWidth ? window.parent.document.documentElement.clientWidth : window.parent.document.documentElement.scrollWidth) + "px";
  d.style.height = (window.parent.document.documentElement.clientHeight > window.parent.document.documentElement.scrollHeight ? window.parent.document.documentElement.clientHeight : window.parent.document.documentElement.scrollHeight) + "px";
  d.style.background = "#333";
  d.style.textAlign = "center";
  d.style.zIndex = "10000";
  d.style.filter = "alpha(opacity=20)";
  d.style.opacity = 0;
  var p = window.parent.document.createElement("DIV");
  var s = document.all ? true : false;
  var u = s && [/MSIE (\d+)\.0/i.exec(navigator.userAgent)][0][1] == 6;
  p.id = "alertFram";
//@mql_modify 2013-4-22 start----------
// alertFram.style.position = "absolute";
  p.style.position = "fixed";
//@mql_modify 2013-4-22 end;-----------
  p.style.left = "40%";
  p.style.top = "20%";
  p.style.marginLeft = "-103px";
//alertFram.style.marginTop = -75 + window.parent.document.documentElement.scrollTop + "px";
  p.style.width = n + "px";
// alertFram.style.height ="600px";
  p.style.background = "";
  p.style.textAlign = "center";
//alertFram.style.lineHeight = "150px";
  p.style.zIndex = "10001";
  var m = "<dl><dd><div class='login_right'><a style='cursor:pointer;' onclick='closePop()' title='关闭此对话框' class='close'></a></div></dd>";
  m += '<dt><iframe id="ifrReg" name="ifrReg" style="position:relative" src=\'' + t + "' scrolling='no' width='100%' frameborder='0' height='" + o + "px'></iframe></dt></dl>";
  p.innerHTML = m;
  window.parent.document.body.appendChild(p);
  window.parent.document.body.appendChild(d);
//@mql_modify 2013-4-22 start-------
  (function (e, t) {
    var n = !!document.all && t.documentMode == undefined, o = t.getElementById("alertFram"),
      l = t.getElementsByTagName("html")[0], r = 0;
    if (n && t.body.currentStyle.backgroundAttachment !== "fixed") {//IE下防抖动
      l.style.backgroundImage = "url(about:blank)";
      l.style.backgroundAttachment = "fixed";
      o.style.position = "absolute";
      r = parseFloat(o.currentStyle.top) || 200;
      e.onscroll = a
    }
    function a() {
      o.style.top = t.documentElement.scrollTop + r + "px"
    }
  })(window, document);
//@mql_modify 2013-4-22 end-------
  this.setOpacity = function (e, t) {
    if (t >= 1) t = t / 100;
    try {
      e.style.opacity = t
    } catch (n) {
    }
    try {
      if (e.filters.length > 0 && e.filters("alpha")) {
        e.filters("alpha").opacity = t * 100
      } else {
        e.style.filter = 'alpha(opacity="' + t * 100 + '")'
      }
    } catch (n) {
    }
  };
  var y = 0;
  this.doAlpha = function () {
    if (++y > 20) {
      clearInterval(h);
      return 0
    }
    setOpacity(d, y)
  };
  var h = setInterval("doAlpha()", 1);
  this.doOk = function () {
    p.style.display = "none";
    d.style.display = "none";
    try {
      i.focus()
    } catch (e) {
    }
  };
  try {
    i.blur()
  } catch (c) {
  }
}
function popupHTML(e, t, n) {
  popupWHTML(e, t, 240, n)
}
function popupWHTML(e, t, n, o) {
  var l;
  try {
    l = window.parent.document.all ? window.event.srcElement : arguments[1]
  } catch (r) {
  }
  var a = window.parent.document.createElement("DIV");
  a.id = "shield";
  a.style.position = "absolute";
  a.style.left = "0px";
  a.style.top = "0px";
  a.style.width = "100%";
  a.style.height = (window.parent.document.documentElement.clientHeight > window.parent.document.documentElement.scrollHeight ? window.parent.document.documentElement.clientHeight : window.parent.document.documentElement.scrollHeight) + "px";
  a.style.background = "#333";
  a.style.textAlign = "center";
  a.style.zIndex = "10000";
  a.style.filter = "alpha(opacity=0)";
  a.style.opacity = 0;
  var i = window.parent.document.createElement("DIV");
  i.id = "alertFram";
  i.style.position = "absolute";
  i.style.left = "50%";
  i.style.top = "20%";
  i.style.marginLeft = "-225px";
  i.style.marginTop = -75 + window.parent.document.documentElement.scrollTop + "px";
  i.style.width = n + "px";
// alertFram.style.height ="600px";
  i.style.background = "";
  i.style.textAlign = "center";
//alertFram.style.lineHeight = "150px";
  i.style.zIndex = "10001";
  strHtml = "<dl><dd><h3>" + e + "</h3><a style='cursor:hand;' onclick='closePop1()' title='关闭此对话框' class='close'>关闭</a></dd>";
//debugger;
//popHtm = HTMLEncode(popHtm);
  strHtml += "<dt><table width=100% height=" + o + "px><tr><td valign=top align=left>" + t + "</td></tr></table></dt></dl>";
  i.innerHTML = strHtml;
  window.parent.document.body.appendChild(i);
  window.parent.document.body.appendChild(a);
  this.setOpacity = function (e, t) {
    if (t >= 1) t = t / 100;
    try {
      e.style.opacity = t
    } catch (n) {
    }
    try {
      if (e.filters.length > 0 && e.filters("alpha")) {
        e.filters("alpha").opacity = t * 100
      } else {
        e.style.filter = 'alpha(opacity="' + t * 100 + '")'
      }
    } catch (n) {
    }
  };
  var c = 0;
  this.doAlpha = function () {
    if (++c > 20) {
      clearInterval(d);
      return 0
    }
    setOpacity(a, c)
  };
  var d = setInterval("doAlpha()", 1);
  this.doOk = function () {
    i.style.display = "none";
    a.style.display = "none";
    try {
      l.focus()
    } catch (e) {
    }
  };
  try {
    l.blur()
  } catch (r) {
  }
}
function closePopHtml() {
  try {
    window.parent.document.body.removeChild(window.parent.document.getElementById("shield"));
    window.parent.document.body.removeChild(window.parent.document.getElementById("alertFram"))
  } catch (e) {
  }
}
function closePop() {
  try {
    parent.document.body.removeChild(parent.document.getElementById("shield"));
    parent.document.body.removeChild(parent.document.getElementById("alertFram"));
    popup_state = false
  } catch (e) {
  }
}
// 重写和讯大网登录弹出窗关闭的方法
function closePop() {
  window.location.href = window.location.protocol + "//" + "zhibo.hexun.com/"
}